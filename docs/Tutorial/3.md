# Chapter 3 – Understanding the Stacks

Tacit programs manipulate data through two primary stacks: the
**data stack** (`STACK`) and the **return stack** (`RSTACK`).
Understanding how these stacks work is essential to writing correct
Tacit code. This chapter explores the basics of pushing and
consuming values, stack operations and how stack frames are built.

## 3.1 The Data Stack (`STACK`)

The data stack is where your program stores operands, intermediate
results and most values. It grows **upward**, meaning that pushing a
new value increases the stack pointer (`SP`). The **top of the
stack** (TOS) is the rightmost item in diagrams and examples. When
you enter a literal or run a builtin that produces a value, the
result appears at TOS. When a builtin consumes values, it takes
them from TOS first.

Basic numbers, booleans, strings, lists and references all occupy a
single cell on the data stack. Compounds like lists may occupy
multiple cells, but they always have a header at TOS and their
payload cells beneath it. You do not need to manage addresses
directly for simple code; Tacit operations know how to traverse lists
and other structures.

### Stack Operations

Tacit provides a number of primitives that operate directly on the
stack:

| Operation | Stack effect | Description |
|---|---|---|
| `dup` | `( a — a a )` | Duplicate the top value. |
| `swap` | `( a b — b a )` | Swap the top two values. |
| `drop` | `( a — )` | Discard the top value. |
| `over` | `( a b — a b a )` | Copy the second value. |
| `rot` | `( a b c — b c a )` | Rotate three values to the left. |
| `pick` | `( … i — … x )` | Copy the i‑th element from the top. |
| `tuck` | `( a b — b a b )` | Duplicate the top value and insert it beneath. |

The parentheses in the stack effect column follow the convention
`( before — after )`. Items before the dash represent the stack
contents consumed by the operation; items after represent the
contents produced.

#### Example: Swapping and Dropping
