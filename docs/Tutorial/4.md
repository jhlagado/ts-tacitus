# Chapter 4 – Tagged Values and Types

At the heart of Tacit’s type system lies a uniform representation:
every value is stored in a **32‑bit cell** that includes a tag and a
payload. This chapter explains how these **tagged values** work,
what kinds of values exist in Tacit, and how the runtime uses the
tags to enforce type safety.

## 4.1 NaN‑Boxed Encoding

Tacit uses a technique called *NaN‑boxing* to represent multiple
types in a single 32‑bit word. In the IEEE 754 floating point
standard, NaNs (Not‑a‑Number values) are represented by setting the
exponent bits to `0xFF`. Tacit takes advantage of the fact that
there are many possible bit patterns for NaN. By reserving some bits
of a quiet NaN, Tacit stores a **tag** in the high bits and a
16‑bit **payload** in the low bits. The sign bit is reserved to
distinguish **functions** (colon definitions) from **blocks**
(quotations). Numbers that are not NaN are stored directly without
a tag.

The tag occupies six bits and identifies the kind of value. The
payload stores additional information such as an opcode number,
bytecode address or list length. The active tag set is:

| Tag | Description | Payload |
|---|---|---|
| **NUMBER (0)** | A 32‑bit IEEE 754 float. No tag bits are set; the full cell is the number. | n/a |
| **SENTINEL (1)** | A reserved sentinel used for the value `NIL`. | Always zero |
| **CODE (2)** | A reference to a bytecode address. The `meta` flag distinguishes a function (0) from a block (1). | 16‑bit address |
| **STACK_REF (3)** | A reference to a cell in the data stack (`STACK`). | Absolute cell index |
| **STRING (4)** | A reference to the string segment (`STRING`). | 16‑bit string offset |
| **BUILTIN (7)** | A built‑in operation. | Opcode (0–127) |
| **LIST (8)** | A list header. The payload is the number of payload slots. | Number of slots |

Tags from 5–6 and 9–63 are reserved for future use. The VM rejects
invalid tags at runtime.

## 4.2 Numbers and Sentinels

Numeric literals are written as you would expect:
